(this["webpackJsonpfns-app"]=this["webpackJsonpfns-app"]||[]).push([[0],{223:function(e,t,n){e.exports=n.p+"static/media/logo.0449d2d5.png"},240:function(e,t,n){e.exports=n(451)},261:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){},389:function(e,t,n){},390:function(e,t,n){},445:function(e,t,n){},448:function(e,t,n){},449:function(e,t,n){},451:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),i=n(51),l=n(233),s=n(144),u=n(98),m=n(204),p=n(232),f=n(205),y=n(234),h=n(16),d=n.n(h),g=n(52),E=n(80),v=function e(){var t=this;Object(u.a)(this,e),this._apiKey="&key=1b75eebcf8f54699935d9cc3e07d46c674e9b271",this._apiFNS="https://api-fns.ru/api/search?q=",this.getCompany=function(){var e=Object(g.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("".concat(t._apiFNS).concat(n).concat(t._apiKey));case 2:return a=e.sent,console.log(a.data.items),e.abrupt("return",a.data.items);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.verificationPartner=function(){var e=Object(g.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("https://api-fns.ru/api/check?req=".concat(n).concat(t._apiKey));case 2:return a=e.sent,e.abrupt("return",t._transformVerification(a.data.items[0].\u042e\u041b||a.data.items[0].\u0418\u041f));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._transformVerification=function(e){return{Positive:e.\u041f\u043e\u0437\u0438\u0442\u0438\u0432,Negative:e.\u041d\u0435\u0433\u0430\u0442\u0438\u0432}},this.getStatement=function(){var e=Object(g.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","https://api-fns.ru/api/vyp?req=".concat(n).concat(t._apiKey));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getFullInformation=function(){var e=Object(g.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("https://api-fns.ru/api/egr?req=".concat(n,"&key=").concat(t._apiKey));case 2:return a=e.sent,e.abrupt("return",a.data.items[0].\u042e\u041b||a.data.items[0].\u0418\u041f);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._apiKeyYandex="fbe27a07-f3ff-4ee7-b8a6-801e7e021216",this._apiYandex="https://geocode-maps.yandex.ru/1.x/?format=json&apikey=".concat(this._apiKeyYandex,"&geocode="),this.get\u0421oordinates=function(){var e=Object(g.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("".concat(t._apiYandex).concat(n));case 2:return a=e.sent,e.abrupt("return",a.data.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getCoord=function(){var e=Object(g.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get\u0421oordinates(n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=n(79),O=n(456),k=n(458),S=n(459),j=n(145),C=n(461),N=n(462),w=(n(261),function(e){var t=e.loading,n=e.onSearchCompany,c=e.error,o=Object(a.useState)(""),i=Object(b.a)(o,2),l=i[0],s=i[1];return t?r.a.createElement(O.a,{size:"large"}):r.a.createElement("div",{className:"search"},r.a.createElement(k.a,null,r.a.createElement(S.a,{placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: '\u0443\u0433\u0430\u0442\u0443'",value:l,onChange:function(e){s(e.target.value)}}),r.a.createElement(j.a,{type:"primary",htmlType:"submit",icon:r.a.createElement(N.a,null),onClick:function(e){e.preventDefault(),n(l),s("")}},"\u041f\u043e\u0438\u0441\u043a"),c&&r.a.createElement(C.a,{style:{width:400,margin:"5px auto 0"},message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c.",type:"error",showIcon:!0})))}),_=(n(386),n(387),n(66)),x=(n(388),function(e){var t=e.list,n=e.loading,c=e.company,o=e.setLoadingFalse,i=Object(a.useState)(11),l=Object(b.a)(i,2),s=l[0],u=l[1],m=Object(a.useState)([54.75,56]),p=Object(b.a)(m,2),f=p[0],y=p[1];return Object(a.useEffect)((function(){c&&(o(),u(17),y([c.point[1],c.point[0]]))}),[c]),n?r.a.createElement(O.a,{size:"large"}):r.a.createElement("div",{className:"map"},r.a.createElement(_.d,{query:{ns:"use-load-option",load:"Map,Placemark,control.ZoomControl,control.FullscreenControl,geoObject.addon.balloon"}},r.a.createElement(_.b,{style:{width:650,height:500},defaultState:{center:f,zoom:s,controls:["zoomControl","fullscreenControl"]}},c?r.a.createElement(_.c,{defaultGeometry:[c.point[1],c.point[0]],properties:{balloonContentBody:"<b>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:</b> ".concat(c.\u041d\u0430\u0438\u043c\u041f\u043e\u043b\u043d\u042e\u041b||c.\u0424\u0418\u041e\u041f\u043e\u043b\u043d," <hr>\n              <b>\u0418\u041d\u041d:</b> ").concat(c.\u0418\u041d\u041d,"<hr>\n              <b>\u041e\u0413\u0420\u041d:</b> ").concat(c.\u041e\u0413\u0420\u041d,"<hr>\n              <b>\u0410\u0434\u0440\u0435\u0441:</b> ").concat(c.\u0410\u0434\u0440\u0435\u0441\u041f\u043e\u043b\u043d,"<hr>\n              <b>\u0421\u0442\u0430\u0442\u0443\u0441:</b> ").concat(c.\u0421\u0442\u0430\u0442\u0443\u0441,"<hr>\n              <b>\u0412\u0438\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438:</b> ").concat(c.\u041e\u0441\u043d\u0412\u0438\u0434\u0414\u0435\u044f\u0442)}}):t?t.map((function(e){return r.a.createElement(_.c,{defaultGeometry:[e.point[1],e.point[0]],properties:{balloonContentBody:"<b>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:</b> ".concat(e.\u041d\u0430\u0438\u043c\u041f\u043e\u043b\u043d\u042e\u041b||e.\u0424\u0418\u041e\u041f\u043e\u043b\u043d,"<hr>\n                    <b>\u0418\u041d\u041d:</b> ").concat(e.\u0418\u041d\u041d,"<hr>\n                    <b>\u041e\u0413\u0420\u041d:</b> ").concat(e.\u041e\u0413\u0420\u041d,"<hr>\n                    <b>\u0410\u0434\u0440\u0435\u0441:</b> ").concat(e.\u0410\u0434\u0440\u0435\u0441\u041f\u043e\u043b\u043d,"<hr>\n                    <b>\u0421\u0442\u0430\u0442\u0443\u0441:</b> ").concat(e.\u0421\u0442\u0430\u0442\u0443\u0441,"<hr>\n                    <b>\u0412\u0438\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438:</b> ").concat(e.\u041e\u0441\u043d\u0412\u0438\u0434\u0414\u0435\u044f\u0442)}})})):null,r.a.createElement(_.a,{options:{float:"left"}}))))}),L=(n(389),n(223)),P=n.n(L),I=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__wrapper"},r.a.createElement("img",{src:P.a,alt:"logo"}),r.a.createElement("span",null,"\u0424\u041d\u0421 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430!!!")))},G=(n(390),function(e){var t=e.historyList,n=e.onSearchCompany;if(0===t.length)return null;var a=t.map((function(e){return r.a.createElement("div",{className:"history__item"},r.a.createElement("span",{onClick:function(){return n(e.name)}},e.name),r.a.createElement("hr",null))}));return r.a.createElement("div",{style:{marginLeft:35,background:"white",padding:"10px 20px"}},r.a.createElement("p",{style:{fontSize:17,fontWeight:500}},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432"),a)}),z=n(457),F=function(e){var t=e.positive,n=e.negative;return console.log(),r.a.createElement("div",null,r.a.createElement(z.a,{height:320,width:320,innerRadius:60,padAngle:5,style:{data:{stroke:"#c43a31",strokeWidth:1}},colorScale:["rgb(230, 118, 137)","#74A8DA"],data:[{x:"Neg",y:Object.keys(n).length-1},{x:"Pos",y:Object.keys(t).length-1}]}))},A=(n(445),n(460)),K=A.a.Panel,q=function(e){var t=e.positive,n=e.negative,a=e.status;if(!t||!n)return r.a.createElement(O.a,{size:"large"});var c="\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435"===a?"active":"unActive";return r.a.createElement("div",{className:"description"},r.a.createElement("div",null,r.a.createElement("b",{style:{fontSize:17}},"\u041f\u043e\u0437\u0438\u0442\u0438\u0432\u043d\u044b\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b:"),Object.keys(t).length>0?Object.keys(t).map((function(e){return"object"===typeof t[e]?r.a.createElement(A.a,{style:{marginLeft:7}},r.a.createElement(K,{header:e,key:e},Object.keys(t[e]).map((function(n){return r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("b",null,n,":")," ",t[e][n]),r.a.createElement("hr",null))})))):r.a.createElement("p",{style:{marginLeft:15}},r.a.createElement("b",null,e,":")," ",t[e])})):r.a.createElement("p",{style:{marginLeft:15}},"\u041f\u043e\u0437\u0438\u0442\u0438\u0432\u043d\u044b\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")),r.a.createElement("hr",null),r.a.createElement("div",{style:{marginTop:20}},r.a.createElement("b",{style:{fontSize:17}},"\u041d\u0435\u0433\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b:"),Object.keys(n).length>0?Object.keys(n).map((function(e){return"object"===typeof n[e]?r.a.createElement(A.a,{style:{marginLeft:7}},r.a.createElement(K,{header:e,key:e},Object.keys(n[e]).map((function(t){return r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("b",null,t,":")," ",n[e][t]),r.a.createElement("hr",null))})))):r.a.createElement("p",{style:{marginLeft:15}},r.a.createElement("b",null,e,":")," ",n[e])})):r.a.createElement("p",{style:{marginLeft:15}},"\u041d\u0435\u0433\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")),r.a.createElement("hr",null),r.a.createElement("p",null,"\u0421\u0442\u0430\u0442\u0443\u0441: ",r.a.createElement("span",{className:c},a)),r.a.createElement(F,{positive:t,negative:n}))},D=(n(448),A.a.Panel),J=function(e){var t=e.information;return t?(console.log(t),r.a.createElement("div",{className:"fullDescription"},r.a.createElement("div",null,r.a.createElement("b",{style:{fontSize:17}},"\u041f\u043e\u043b\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f:"),Object.keys(t).map((function(e){return Array.isArray(t[e])&&t[e].map((function(e){return null})),"object"===typeof t[e]?r.a.createElement(A.a,{style:{marginLeft:7}},r.a.createElement(D,{header:e,key:e}," ",Object.keys(t[e]).map((function(n){return r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("b",null,n,":")," ",t[e][n]),r.a.createElement("hr",null))})))):r.a.createElement("p",{style:{marginLeft:7}},r.a.createElement("b",null,e,":")," ",t[e],r.a.createElement("hr",null))}))))):r.a.createElement(O.a,{size:"large"})},T=n(39),Y=(n(449),function(e){var t=e.companyNull,n=e.list,c=e.onGetCompany,o=e.loading;return Object(a.useEffect)((function(){t()}),[]),!n||o?r.a.createElement(O.a,{size:"large"}):r.a.createElement("div",{className:"companyList"},r.a.createElement("div",null,n.map((function(e){return r.a.createElement("div",{key:e.\u0418\u041d\u041d,onClick:function(){return c(e)},className:"company"},r.a.createElement(i.b,{to:"/company_list/".concat(e.\u041d\u0430\u0438\u043c\u0421\u043e\u043a\u0440\u042e\u041b),activeClassName:"company_active"},e.\u041d\u0430\u0438\u043c\u041f\u043e\u043b\u043d\u042e\u041b||e.\u0424\u0418\u041e\u041f\u043e\u043b\u043d),r.a.createElement("p",null,"\u0421\u0442\u0430\u0442\u0443\u0441:",r.a.createElement("span",{className:"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435"===e.\u0421\u0442\u0430\u0442\u0443\u0441?"active":"unActive"},e.\u0421\u0442\u0430\u0442\u0443\u0441)),r.a.createElement("hr",null))}))))}),B=n(463),M=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).service=new v,n.state={list:[],company:null,error:!1,loading:!1,Positive:null,Negative:null,historyList:[],fullInformation:null},n.companyNull=function(){n.setState({company:null})},n.searchCompany=function(e){if(e){n.setState({error:!1}),n.props.history.push("/company_list");var t={name:e};n.setState({list:[],historyList:[].concat(Object(s.a)(n.state.historyList),[t])}),n.setState({loading:!0,Positive:null,Negative:null}),n.service.getCompany(e).then((function(e){e.map((function(e){if(e.hasOwnProperty("\u042e\u041b")){if("\u0418\u041d\u041d"===e.\u042e\u041b.\u0413\u0434\u0435\u041d\u0430\u0439\u0434\u0435\u043d\u043e)return n.getCoordinates([e.\u042e\u041b]);if("\u041e\u0413\u0420\u041d"===e.\u042e\u041b.\u0413\u0434\u0435\u041d\u0430\u0439\u0434\u0435\u043d\u043e)return n.getCoordinates([e.\u042e\u041b]);if(e.\u042e\u041b.\u0413\u0434\u0435\u041d\u0430\u0439\u0434\u0435\u043d\u043e.indexOf("\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u042e\u041b")>-1)return n.getCoordinates([e.\u042e\u041b])}else if(e.hasOwnProperty("\u0418\u041f"))return n.getCoordinates([e.\u0418\u041f])}))}))}else n.setState({error:!0})},n.verificatePartner=function(){n.service.verificationPartner(n.state.company.\u0418\u041d\u041d).then((function(e){n.setState({Positive:e.Positive,Negative:e.Negative})}))},n.onGetStatement=function(){n.service.getStatement(n.state.company.\u0418\u041d\u041d).then((function(e){window.open(e)}))},n.onGetInformation=function(){n.service.getFullInformation(n.state.company.\u0418\u041d\u041d).then((function(e){n.setState({fullInformation:e})}))},n.getCompany=function(e){e!==n.state.company&&n.setState({loading:!0,company:e})},n.setLoadingFalse=function(){n.setState({loading:!1})},n}return Object(y.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){if(null!==localStorage.getItem("company")){var e=JSON.parse(localStorage.getItem("company"));this.setState({historyList:e})}}},{key:"componentDidUpdate",value:function(){(localStorage.setItem("company",JSON.stringify(this.state.historyList)),null!==localStorage.getItem("company"))&&(6===JSON.parse(localStorage.getItem("company")).length&&this.setState((function(e){return{historyList:e.historyList.slice(1)}})))}},{key:"getCoordinates",value:function(e){var t=this;e.map((function(e){t.service.getCoord(e.\u0410\u0434\u0440\u0435\u0441\u041f\u043e\u043b\u043d).then((function(n){t.setState({list:[].concat(Object(s.a)(t.state.list),[Object(l.a)({},e,{point:n.split(" ")})])})}))})),this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.list,a=t.error,c=t.loading,o=t.Positive,l=t.Negative,s=t.historyList,u=t.fullInformation,m=t.company;return r.a.createElement("div",{className:"main"},r.a.createElement(I,null),r.a.createElement("div",{className:"search"},r.a.createElement("div",{style:{paddingTop:30},className:"search__wrapper"},r.a.createElement("div",{style:{padding:10}},r.a.createElement(w,{onSearchCompany:this.searchCompany,error:a}),r.a.createElement(x,{list:n,onGetCoordinates:this.getCoordinates,loading:c,verificatePartner:this.verificatePartner,getStatement:this.onGetStatement,getInformation:this.onGetInformation,company:m,setLoadingFalse:this.setLoadingFalse}),m&&r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(j.a,{style:{width:200},type:"primary",onClick:this.verificatePartner},r.a.createElement(i.b,{to:"/company_list/".concat(m.\u041d\u0430\u0438\u043c\u0421\u043e\u043a\u0440\u042e\u041b,"/check")},"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430")),r.a.createElement(j.a,{style:{width:200,marginLeft:15},type:"primary",onClick:this.onGetInformation},r.a.createElement(i.b,{to:"/company_list/".concat(m.\u041d\u0430\u0438\u043c\u0421\u043e\u043a\u0440\u042e\u041b,"/full_information")},"\u041f\u043e\u043b\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f")),r.a.createElement(j.a,{style:{width:200,marginLeft:15},type:"primary",onClick:this.onGetStatement,icon:r.a.createElement(B.a,null),size:"large"},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u044b\u043f\u0438\u0441\u043a\u0443"))),r.a.createElement(T.a,{exact:!0,path:"/company_list",render:function(){return r.a.createElement(Y,{companyNull:e.companyNull,list:n,onGetCompany:e.getCompany,loading:c})}}),r.a.createElement(T.a,{path:"/company_list/:company/check",render:function(){return r.a.createElement(q,{status:m.\u0421\u0442\u0430\u0442\u0443\u0441,positive:o,negative:l})}}),r.a.createElement(T.a,{path:"/company_list/:company/full_information",render:function(){return r.a.createElement(J,{information:u})}}),r.a.createElement(G,{onSearchCompany:this.searchCompany,historyList:s}))))}}]),t}(a.Component),V=Object(T.e)(M);o.a.render(r.a.createElement(i.a,null,r.a.createElement(V,null)),document.getElementById("root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.c4e26e99.chunk.js.map